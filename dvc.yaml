stages:
  download_zones:
    cmd:  curl 'https://api.electricitymap.org/v3/zones' > data/raw/electricitymaps_zones.json
    outs:
    - data/raw/electricitymaps_zones.json
  unpack_gridemissions:
    cmd: |
      tar xvfz data/raw/gridemissions_bulk_file.tar.gz -C data/interim/ && mv data/interim/processed data/interim/gridemissions
    outs:
    - data/interim/gridemissions
  load_gridemissions_history:
    cmd: python power_dashboard/load_grid_emissions_history.py
    deps:
    - data/interim/gridemissions
    outs:
    - data/processed/gridemissions_ts.csv
    - pipeline_logs/load_grid_emissions_history.log
